<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - School ERP</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #005A9C; /* Deep Blue */
            --secondary-color: #C0392B; /* Accent Red */
            --bg-light: #f4f6f9;
            --text-dark: #333;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .dashboard-container {
            max-width: 1300px;
            margin: 50px auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            flex-grow: 1;
        }

        /* --- Header & Navigation --- */
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 2.2em;
            margin: 0;
        }

        .top-right-nav {
            display: flex;
            gap: 15px;
        }

        .top-right-nav a, .top-right-nav button {
            background-color: var(--primary-color);
            color: #ffffff;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }
        
        .top-right-nav button {
            background-color: var(--secondary-color);
        }

        .top-right-nav a:hover { background-color: #00457A; }
        .top-right-nav button:hover { background-color: #A93226; }

        /* --- Category & Grid --- */
        h2 {
            color: var(--primary-color);
            border-bottom: 3px solid #EAEAEA;
            padding-bottom: 8px;
            margin-top: 30px;
            margin-bottom: 25px;
            font-size: 1.6em;
            font-weight: 600;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
        }
        
        /* --- Dashboard Cards --- */
        .dashboard-card { 
            background: #ffffff; 
            border: 1px solid #ddd; 
            border-top: 5px solid var(--primary-color); 
            border-radius: 8px; 
            padding: 25px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center;
            text-decoration: none; 
            color: var(--text-dark); 
            transition: all 0.3s ease; 
            box-shadow: var(--card-shadow);
        }
        
        .dashboard-card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); 
            border-top-color: var(--secondary-color);
        }
        
        .dashboard-card .icon { 
            font-size: 3em; 
            color: var(--primary-color); 
            margin-bottom: 10px; 
            transition: color 0.3s;
        }

        .dashboard-card:hover .icon {
            color: var(--secondary-color);
        }

        .dashboard-card span:last-child {
            font-weight: 600;
            font-size: 1.1em;
        }
        
        /* --- Welcome/Time Message Area --- */
        #welcome-area {
            text-align: right;
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }

    </style>
</head>
<body>
<script>
    // --- Authentication and Authorization Check ---
    const token = localStorage.getItem('erp-token');
    const userRole = localStorage.getItem('user-role');
    const username = localStorage.getItem('username'); 
    
    // Redirect if token is missing or user is not a Teacher
    if (!token || userRole !== 'Teacher') {
        window.location.href = '/login.html';
    }

    // --- Logout Function ---
    function logout() {
        localStorage.removeItem('erp-token');
        localStorage.removeItem('user-role');
        localStorage.removeItem('username');
        window.location.href = '/login.html';
    }
</script>

    <div class="dashboard-container">
        <div class="header-section">
            <div>
                <h1 id="greeting-message">Teacher Dashboard</h1>
                <div id="welcome-area">
                    <p id="datetime"></p>
                </div>
            </div>
            
            <div class="top-right-nav">
                <a href="/profile.html">üë§ My Profile</a>
                <a href="/messaging.html">‚úâÔ∏è Messages</a>
                <button onclick="logout()">üö™ Logout</button> 
            </div>
        </div>

        <h2>Academic & Class Management</h2>
        <div class="card-grid">
            <a href="/my-timetable.html" class="dashboard-card" title="View assigned classes and periods.">
                <span class="icon">üïì</span><span>My Timetable</span>
            </a>
            <a href="/manage-attendance.html" class="dashboard-card" title="Mark daily attendance for assigned classes.">
                <span class="icon">‚úÖ</span><span>Mark Attendance</span>
            </a>
            <a href="/view-students-class.html" class="dashboard-card" title="View class roster, student details, and contact info.">
                <span class="icon">üßë‚Äçüéì</span><span>My Students</span>
            </a>
            <a href="/homework-assignments.html" class="dashboard-card" title="Create, assign, and review homework/classwork.">
                <span class="icon">‚úçÔ∏è</span><span>Assignments</span>
            </a>
            <a href="/grade-submissions.html" class="dashboard-card" title="Enter marks and grades for exams and assignments.">
                <span class="icon">üíØ</span><span>Gradebook Entry</span>
            </a>
            <a href="/study-material-upload.html" class="dashboard-card" title="Upload resources, documents, and videos for students.">
                <span class="icon">üìö</span><span>Study Materials</span>
            </a>
            <a href="/online-exam-creation.html" class="dashboard-card" title="Create and schedule online quizzes and tests.">
                <span class="icon">üìù</span><span>Online Quizzes</span>
            </a>
            <a href="/academic-calendar.html" class="dashboard-card" title="View important school dates and deadlines.">
                <span class="icon">üìÖ</span><span>Academic Calendar</span>
            </a>
        </div>

        <h2>HR & School Operations</h2>
        <div class="card-grid">
            <a href="/my-attendance.html" class="dashboard-card" title="View personal attendance records and history.">
                <span class="icon">üìä</span><span>My Attendance</span>
            </a>
            <a href="/request-leave.html" class="dashboard-card" title="Apply for leave and view leave status.">
                <span class="icon">‚úàÔ∏è</span><span>Leave Request</span>
            </a>
            <a href="/view-payroll.html" class="dashboard-card" title="Check salary slips and payroll history.">
                <span class="icon">üíµ</span><span>My Payroll</span>
            </a>
            <a href="/class-teacher-reports.html" class="dashboard-card" title="Generate comprehensive reports for assigned classes.">
                <span class="icon">üìà</span><span>Class Reports</span>
            </a>
            <a href="/student-discipline-log.html" class="dashboard-card" title="Log disciplinary incidents for students in assigned classes.">
                <span class="icon">‚öñÔ∏è</span><span>Discipline Log</span>
            </a>
            <a href="/ptm-schedule.html" class="dashboard-card" title="View Parent-Teacher Meeting schedules.">
                <span class="icon">ü§ù</span><span>PTM Schedule</span>
            </a>
            <a href="/internal-feedback.html" class="dashboard-card" title="Provide feedback to the administration or IT.">
                <span class="icon">üì¢</span><span>Internal Feedback</span>
            </a>
            <a href="/settings.html" class="dashboard-card" title="Manage account and notification settings.">
                <span class="icon">‚öôÔ∏è</span><span>Settings</span>
            </a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const greetingMessageEl = document.getElementById('greeting-message');
            const datetimeEl = document.getElementById('datetime');
            const greetingName = username || 'Teacher';

            function updateHeader() {
                const now = new Date();
                const hour = now.getHours();
                
                let greeting = 'Welcome';
                if (hour < 12) {
                    greeting = 'Good Morning ‚òÄÔ∏è';
                } else if (hour < 17) {
                    greeting = 'Good Afternoon üå§Ô∏è';
                } else {
                    greeting = 'Good Evening üåô';
                }
                
                greetingMessageEl.textContent = `${greeting}, ${greetingName}`;

                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit', 
                    timeZone: 'Asia/Kolkata' 
                };
                datetimeEl.textContent = now.toLocaleDateString('en-IN', options);
            }
            
            updateHeader(); 
            setInterval(updateHeader, 1000); 

        });
    </script>
    <script src="js/global-config.js"></script>
</body>
</html>