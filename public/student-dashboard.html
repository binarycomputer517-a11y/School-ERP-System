<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <style>
        /* --- 0. Global Variables and Base Style --- */
        :root {
            --primary-dark: #003366; /* School Blue */
            --primary-accent: #1e88e5; /* Lighter Blue for links/buttons */
            --secondary-purple: #5e35b1; /* Deep Purple for Navbar */
            --secondary-light: #7a44f2;
            --bg-light: #f8f9fa; /* Lighter background for headers */
            --bg-body: #f0f2f8;
            --text-dark: #333;
            --shadow-md: 0 4px 15px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Montserrat', sans-serif; /* Using a modern font */
            margin: 0;
            background-color: var(--bg-body);
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 25px auto;
            padding: 30px;
            background-color: var(--bg-body);
            border-radius: 12px;
        }

        h1 {
            color: var(--primary-dark);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: 700;
        }
        
        /* --- 1. Header and Logout --- */
        .logout-link {
            font-size: 14px;
            color: var(--secondary-purple); /* Changed to purple for distinction */
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }
        .logout-link:hover { text-decoration: underline; }


        /* --- 2. Profile Banner --- */
        .profile-card {
            background: linear-gradient(135deg, var(--secondary-light) 0%, var(--secondary-purple) 100%);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(94, 53, 177, 0.3);
            transition: all 0.3s ease;
        }
        .profile-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(94, 53, 177, 0.4);
        }
        .profile-label {
            font-weight: 500;
            color: #d1c4e9;
            font-size: 11px; /* Slightly smaller for cleaner look */
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .profile-value {
            font-size: 15px;
            color: #ffffff;
            font-weight: 700;
        }
        #student-photo {
            object-fit: cover;
            background: #fff;
            padding: 3px;
        }


        /* --- 3. Sidebar Navigation --- */
        .col-md-3 .card {
            background-color: var(--secondary-purple);
            border: none;
            box-shadow: var(--shadow-md);
            border-radius: 12px;
            margin-bottom: 20px !important; /* Standardize margin */
        }
        .nav-card .card-header {
            background-color: transparent;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding: 1rem 1rem;
            color: #ffffff;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: background-color 0.2s;
        }
        .nav-card .card-header:hover {
             background-color: rgba(255, 255, 255, 0.05);
        }
        .col-md-3 .list-group-item {
            background-color: transparent;
            color: #e8eaf6;
            border: none;
            padding: 10px 1rem;
            font-weight: 500;
            font-size: 13px;
            transition: background-color 0.2s, color 0.2s;
        }
        .col-md-3 .list-group-item-action:hover,
        .col-md-3 .list-group-item-action:focus {
            background-color: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }
        /* Menu Icon Styling for smooth rotation */
        .menu-icon {
            transition: transform 0.3s ease-in-out;
            font-weight: 900 !important;
            font-size: 1.2rem !important;
            line-height: 1;
        }
        .nav-card .card-header[aria-expanded="true"] .menu-icon {
            transform: rotate(180deg);
        }


        /* --- 4. Main Content Cards (White Background) --- */
        .col-md-9 .card {
            background-color: #ffffff;
            border: none;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
        }
        .col-md-9 .card-header {
            background-color: var(--bg-light);
            border-bottom: 1px solid #eee;
            color: var(--primary-dark);
            font-weight: 700;
            font-size: 1rem;
        }
        .col-md-9 .card-title { color: var(--primary-dark); font-size: 16px; }
        .col-md-9 h5.fw-bold { color: var(--primary-dark); font-size: 18px; }

        /* Summary item styling */
        .summary-item { padding: 8px 0 !important; }
        .summary-item-value.text-danger { color: #dc3545 !important; font-weight: 700; }
        .summary-item-value.text-success { color: var(--primary-dark) !important; font-weight: 700; }
        
        /* Teacher List */
        #my-teachers-list .list-group-item {
            border-left: 5px solid var(--primary-accent); /* Small accent bar */
            margin-top: 5px;
            transition: all 0.2s;
        }
        #my-teachers-list .list-group-item:hover {
            background-color: var(--bg-body);
        }
    </style>
    
    <script>
        // --- 1. Logout Function ---
        function logout() {
            localStorage.removeItem('erp-token');
            localStorage.removeItem('user-role');
            localStorage.removeItem('user-name');
            localStorage.removeItem('profile-id');
            localStorage.removeItem('active_session_id');
            localStorage.removeItem('active_branch_id');
            // CRITICAL: Ensure all student ID keys are removed
            localStorage.removeItem('student_id'); 
            localStorage.removeItem('student-id'); 
            window.location.href = '/login.html'; 
        }
        
        // Helper function for authorized API calls
        async function authorizedFetch(url) {
            const token = localStorage.getItem('erp-token');
            const response = await fetch(url, {
                headers: { 'Authorization': `Bearer ${token}` }
            });
            if (response.status === 401 || response.status === 403) {
                console.error("Session expired or unauthorized. Forcing logout.");
                logout();
                throw new Error('Unauthorized');
            }
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        }

        // --- 2. Fetch Student Profile (Uses authorizedFetch) ---
        async function fetchStudentData() {
            // Check for student_id first, then fallback to profile-id
            const studentId = localStorage.getItem('student_id') || localStorage.getItem('profile-id'); 
            
            if (!studentId) {
                document.getElementById('welcome-message').textContent = 'Welcome! (Please re-login)';
                return;
            }

            try {
                const data = await authorizedFetch(`/api/students/${studentId}`);
                
                // CRITICAL FIX: Ensure consistent student ID storage
                const finalStudentId = data.student_id || studentId;
                if (data.student_id && finalStudentId !== studentId) {
                    localStorage.setItem('student_id', finalStudentId);
                    localStorage.setItem('profile-id', finalStudentId); 
                }

                const fullName = `${data.first_name || ''} ${data.last_name || ''}`.trim();
                const rollNo = data.roll_number || data.enrollment_no || 'N/A'; // Use roll_number if available

                document.getElementById('welcome-message').textContent = `Welcome, ${fullName || 'Student'}!`;
                document.getElementById('student-id').textContent = data.admission_id || finalStudentId || 'N/A'; 
                document.getElementById('student-grade').textContent = data.course_name || 'N/A'; 
                document.getElementById('student-section').textContent = data.batch_name || 'N/A';
                document.getElementById('student-roll').textContent = rollNo; 
                document.getElementById('student-email').textContent = data.email || 'N/A';

                if (data.profile_image_path) {
                    // FIX: Placeholder logic for image path resolution (assuming global-config handles API prefix)
                    document.getElementById('student-photo').src = data.profile_image_path;
                }

            } catch (error) {
                console.error('Failed to fetch student data:', error);
                document.getElementById('welcome-message').textContent = 'Welcome! (Error loading profile)';
            }
        }

        // --- 3. Fetch Fees (Uses authorizedFetch) ---
        async function fetchFeeData() {
            const studentId = localStorage.getItem('student_id') || localStorage.getItem('profile-id');
            if (!studentId) return;

            try {
                const data = await authorizedFetch(`/api/students/${studentId}/fees`); 

                if (Array.isArray(data) && data.length > 0) {
                    const fee = data[0]; 

                    const tuition = parseFloat(fee.tuition_fee || 0);
                    const library = parseFloat(fee.library_fee || 0); 
                    const transport = parseFloat(fee.transport_fee || 0); 
                    
                    const totalDue = tuition + library + transport;
                    const paid = parseFloat(fee.amount_paid || 0);
                    const balance = totalDue - paid;

                    document.getElementById('fee-tuition').textContent = `‚Çπ${tuition.toFixed(2)}`;
                    document.getElementById('fee-library').textContent = `‚Çπ${library.toFixed(2)}`;
                    document.getElementById('fee-transport').textContent = `‚Çπ${transport.toFixed(2)}`; 
                    
                    document.getElementById('fee-due').textContent = `‚Çπ${totalDue.toFixed(2)}`;
                    document.getElementById('fee-paid').textContent = `‚Çπ${paid.toFixed(2)}`;
                    
                    const balEl = document.getElementById('fee-balance');
                    balEl.textContent = `‚Çπ${balance.toFixed(2)}`;
                    balEl.className = 'summary-item-value ' + (balance > 0 ? 'text-danger' : 'text-success');
                } else {
                    document.getElementById('fee-tuition').textContent = '‚Çπ0';
                    document.getElementById('fee-library').textContent = '‚Çπ0';
                    document.getElementById('fee-transport').textContent = '‚Çπ0'; 
                    document.getElementById('fee-due').textContent = '‚Çπ0';
                    document.getElementById('fee-paid').textContent = '‚Çπ0';
                    document.getElementById('fee-balance').textContent = '‚Çπ0';
                }
            } catch (error) {
                console.error("Fee error:", error);
                document.getElementById('fee-summary-card').innerHTML = '<div class="card-body"><p class="text-danger small">Failed to load fee records.</p></div>';
            }
        }

        // --- 4. Fetch Library (Uses authorizedFetch) ---
        async function fetchLibraryData() {
            const studentId = localStorage.getItem('student_id') || localStorage.getItem('profile-id');
            if (!studentId) return;

            try {
                const data = await authorizedFetch(`/api/students/${studentId}/library`);
                
                const issuedCount = Array.isArray(data) ? data.length : 0;
                
                document.getElementById('books-issued').textContent = issuedCount;
                document.getElementById('library-fines').textContent = `‚Çπ0`; 
                
            } catch (error) {
                console.error("Library error:", error);
            }
        }

        // --- 5. Fetch Announcements (Uses authorizedFetch) ---
        async function fetchAnnouncements() {
            const listElement = document.getElementById('notice-board-list');
            if (!listElement) return;

            try {
                const data = await authorizedFetch(`/api/announcements/role/student`);
                
                if (!Array.isArray(data) || data.length === 0) {
                    listElement.innerHTML = '<li class="list-group-item text-center text-muted small py-3">No recent announcements.</li>';
                    return;
                }
                
                listElement.innerHTML = ''; 
                data.slice(0, 5).forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'list-group-item notice-list-item';
                    const itemDate = new Date(item.created_at).toLocaleDateString();
                    li.innerHTML = `
                        <div class="d-flex justify-content-between">
                            <span class="notice-title">${item.title}</span>
                            <span class="notice-date">${itemDate}</span>
                        </div>
                        <p class="mb-0 small">${item.content ? item.content.substring(0, 90) + '...' : ''}</p>
                    `;
                    listElement.appendChild(li);
                });
            } catch (error) {
                console.error("Announcements error:", error);
                listElement.innerHTML = '<li class="list-group-item text-danger text-center small py-3">Failed to load announcements.</li>';
            }
        }

        // --- 6. Fetch Teachers (Uses authorizedFetch) ---
        async function fetchMyTeachers() {
            const studentId = localStorage.getItem('student_id') || localStorage.getItem('profile-id');
            const listElement = document.getElementById('my-teachers-list');
            if (!studentId || !listElement) return;

            try {
                const data = await authorizedFetch(`/api/students/${studentId}/teachers`);
                listElement.innerHTML = ''; 

                if (!Array.isArray(data) || data.length === 0) {
                    listElement.innerHTML = '<li class="list-group-item text-center text-muted small py-3">No teachers assigned yet.</li>';
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'list-group-item d-flex justify-content-between align-items-center';
                    li.innerHTML = `
                        <span>
                            <strong class="text-primary">${item.subject_name}</strong>
                            <span class="text-muted ms-2">${item.full_name}</span>
                        </span>
                        <a href="mailto:${item.email || ''}" class="btn btn-sm btn-outline-secondary">Contact</a>
                    `;
                    listElement.appendChild(li);
                });
            } catch (error) {
                console.error("Teachers error:", error);
                listElement.innerHTML = '<li class="list-group-item text-danger text-center small py-3">Could not load teacher list.</li>';
            }
        }

        // --- 7. Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            fetchStudentData(); 
            fetchFeeData();
            fetchLibraryData();
            fetchAnnouncements();
            fetchMyTeachers();

            // Hover-to-Show Menus Logic
            const menuCards = document.querySelectorAll('.col-md-3 .nav-card');
            menuCards.forEach(card => {
                const collapseElement = card.querySelector('.collapse');
                const header = card.querySelector('.card-header');
                
                // Only enable hover for desktop views (width >= 768px)
                if (window.innerWidth < 768 || !collapseElement || !header) return; 

                const bsCollapse = new bootstrap.Collapse(collapseElement, { toggle: false });

                // Set initial arrow state based on collapse
                if (collapseElement.classList.contains('show')) {
                    header.setAttribute('aria-expanded', 'true');
                } else {
                     header.setAttribute('aria-expanded', 'false');
                }

                card.addEventListener('mouseenter', () => {
                    bsCollapse.show();
                    header.setAttribute('aria-expanded', 'true');
                });
                card.addEventListener('mouseleave', () => {
                    // Hide only if mouse leaves the whole card area
                    bsCollapse.hide();
                    header.setAttribute('aria-expanded', 'false');
                });
            });
        });
    </script>
</head>
<body class="p-3 p-md-4">
    <div class="dashboard-container">

        <header class="d-flex justify-content-between align-items-center mb-3">
            <h1>Student Dashboard</h1>
            <a class="logout-link" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </header>

        <p id="welcome-message" class="text-secondary mb-4" style="font-size: 18px; font-weight: 500;">Welcome...</p>
        
        <div class="profile-card">
            <div class="row g-3 align-items-center">
                <div class="col-md-2 text-center">
                    <img id="student-photo" 
                         src="https://placehold.co/100x100/e8eaf6/5e35b1?text=Photo" 
                         alt="Profile Photo" 
                         class="img-fluid rounded-circle" 
                         style="width: 100px; height: 100px; border: 3px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
                </div>
                <div class="col-md-10">
                    <div class="row g-3">
                        <div class="col-md-3 col-6">
                            <span class="profile-label">Student ID</span>
                            <span class="profile-value" id="student-id">...</span>
                        </div>
                        <div class="col-md-3 col-6">
                            <span class="profile-label">Grade / Class</span>
                            <span class="profile-value" id="student-grade">...</span>
                        </div>
                        <div class="col-md-3 col-6">
                            <span class="profile-label">Section & Roll No.</span>
                            <span class="profile-value"><span id="student-section">...</span> / <span id="student-roll">...</span></span>
                        </div>
                        <div class="col-md-3 col-6">
                            <span class="profile-label">Email</span>
                            <span class="profile-value" id="student-email">...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row g-4 mt-3">

            <div class="col-md-3">
                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuAcademics">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Academics
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuAcademics" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/registration-certificate.html" class="list-group-item list-group-item-action">üìÖ Registration Certificate</a>
                            <a href="/my-timetable.html" class="list-group-item list-group-item-action">üìÖ View Timetable</a>
                            <a href="/my-exam-schedule.html" class="list-group-item list-group-item-action">üóìÔ∏è View Exam Schedule</a>
                            <a href="/student-admit-card.html" class="list-group-item list-group-item-action">üóìÔ∏è Admit Card</a>
                            <a href="/my-syllabus.html" class="list-group-item list-group-item-action">üìö View Syllabus</a>
                            <a href="/my-assignments.html" class="list-group-item list-group-item-action">‚úçÔ∏è View/Submit Assignments</a>
                            <a href="/my-study-material.html" class="list-group-item list-group-item-action">üìñ Download Study Material</a>
                            <a href="/my-quiz.html" class="list-group-item list-group-item-action">üñ•Ô∏è Online Quiz Portal</a>
                            <a href="/view-transcript.html" class="list-group-item list-group-item-action">‚≠ê View Detailed Marks</a>
                            <a href="/my-view-attendance.html" class="list-group-item list-group-item-action">üìä View Detailed Attendance</a>
                            <a href="/student-certificate.html" class="list-group-item list-group-item-action">üéì My Certificate Card</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuFinance">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Finance
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuFinance" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/online-payment.html" class="list-group-item list-group-item-action">üí≥ Pay Fees Online</a>
                            <a href="/my-payment-history.html" class="list-group-item list-group-item-action">üßæ View Payment History</a>
                            <a href="/my-fee-receipts.html" class="list-group-item list-group-item-action">üì• Download Fee Receipts</a>
                            <a href="/my-scholarship.html" class="list-group-item list-group-item-action">üèÖ View Scholarship Status</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuLibrary">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Library
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuLibrary" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/library-search.html" class="list-group-item list-group-item-action">üîç Search Book Catalog</a>
                            <a href="/library-issued.html" class="list-group-item list-group-item-action">üìò View Issued Books</a>
                            <a href="/mylibrary-history.html" class="list-group-item list-group-item-action">üìñ View Reading History</a>
                            <a href="/mylibraryfines.html" class="list-group-item list-group-item-action">View Library Fines</a>
                            <a href="/myebooks.html" class="list-group-item list-group-item-action">e-Library & Resources</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuServices">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Services
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuServices" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/my-bus.html" class="list-group-item list-group-item-action">üöå View Bus Route</a>
                            <a href="/mybus-tracker.html" class="list-group-item list-group-item-action">üìç Track My Bus (Live)</a>
                            <a href="/mymess-menu.html" class="list-group-item list-group-item-action">üçï View Mess Menu</a>
                            <a href="/myhostel-leave.html" class="list-group-item list-group-item-action">Apply for Hostel Leave</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuProfile">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Profile
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuProfile" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/student-profile.html" class="list-group-item list-group-item-action">üë§ View Full Profile</a>
                            <a href="/change-password.html" class="list-group-item list-group-item-action">üîí Change Password</a>
                            <a href="/apply-leave.html" class="list-group-item list-group-item-action">üìù Apply for Leave</a>
                            <a href="/leave-status.html" class="list-group-item list-group-item-action">‚è±Ô∏è View Leave Status</a>
                            <a href="/my-id-card.html" class="list-group-item list-group-item-action">üí≥ Download ID Card</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm nav-card">
                    <div class="card-header" data-bs-toggle="collapse" data-bs-target="#menuCommunication">
                        <h5 class="mb-0 d-flex justify-content-between align-items-center">
                            Communication
                            <span class="menu-icon"><i class="fas fa-chevron-down"></i></span>
                        </h5>
                    </div>
                    <div id="menuCommunication" class="collapse">
                        <div class="list-group list-group-flush">
                            <a href="/my-school-calendar.html" class="list-group-item list-group-item-action">üìÖ School Event Calendar</a>
                            <a href="/my-messages.html" class="list-group-item list-group-item-action">‚úâÔ∏è Messages (Inbox)</a>
                            <a href="/my-feedback.html" class="list-group-item list-group-item-action">Submit Feedback</a>
                            <a href="/gallery.html" class="list-group-item list-group-item-action">üì∑ View School Gallery</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-9">
                <h5 class="mt-0 fw-bold">My Teachers</h5>
                <ul class="list-group mb-4 shadow-sm" id="my-teachers-list">
                    <li class="list-group-item text-center text-muted small py-3">Loading teachers...</li>
                </ul>

                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="card shadow-sm mb-4" id="fee-summary-card">
                            <div class="card-body">
                                <h5 class="card-title mb-3 fw-bold">Fee Summary</h5>
                                <div class="summary-item">
                                    <span class="summary-item-label">Tuition Fee</span>
                                    <span class="summary-item-value" id="fee-tuition">...</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-item-label">Library Fee</span>
                                    <span class="summary-item-value" id="fee-library">...</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-item-label">Transport Fee</span>
                                    <span class="summary-item-value" id="fee-transport">...</span>
                                </div>
                                <hr style="opacity: 0.1; margin: 10px 0;">
                                <div class="summary-item">
                                    <span class="summary-item-label">Total Due</span>
                                    <span class="summary-item-value" id="fee-due">...</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-item-label">Total Paid</span>
                                    <span class="summary-item-value text-success" id="fee-paid">...</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-item-label">Balance</span>
                                    <span class="summary-item-value" id="fee-balance">...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card shadow-sm mb-4" id="library-summary-card">
                            <div class="card-body">
                                <h5 class="card-title mb-3 fw-bold">Library Summary</h5>
                                <div class="summary-item">
                                    <span class="summary-item-label">Books Issued</span>
                                    <span class="summary-item-value" id="books-issued">...</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-item-label">Total Fines</span>
                                    <span class="summary-item-value" id="library-fines">...</span>
                                </div>
                                <a href="/library-issued.html" class="btn btn-primary btn-sm mt-3 w-100">View Details</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm">
                    <div class="card-header">
                        <h5 class="mb-0 fw-bold">Recent Announcements</h5>
                    </div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush" id="notice-board-list">
                            <li class="list-group-item text-center text-muted small py-3">Loading announcements...</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/global-config.js"></script>
</body>
</html>